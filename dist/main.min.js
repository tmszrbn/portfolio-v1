const navItems=Array.from(document.querySelectorAll('[href^="#"]'));let scrollEvent,lastBodyHeight,lastScroll,navY;const targets=[],navH=document.querySelector("nav").offsetHeight,mapping=()=>{targets.length=0,navItems.map(e=>{const t=e.getAttribute("href"),s=document.querySelector(t),o=s.offsetTop-s.offsetHeight,a=s.parentElement.offsetTop+s.parentElement.offsetHeight-20;e.addEventListener("click",e=>{e.preventDefault(),scrollToTarget(o+20,document.body.offsetHeight)}),targets.push([e,o,a])}),navY=document.querySelector("header").offsetHeight};window.addEventListener("scroll",e=>{scrollspy(targets,pageYOffset,navH)});const widthInterval=setInterval(()=>{lastBodyHeight!=document.body.offsetHeight&&(lastBodyHeight=document.body.offsetHeight,mapping());const e=pageYOffset,t=document.querySelector("nav"),s="navbar--hidden";if(navY<e){const o=t.classList.contains(s);scrollhide(lastScroll,e,o),lastScroll=e}else t.classList.contains(s)&&t.classList.remove(s)},500);let currItem;const smoothScroll=(e,t,s=100)=>{const o=pageYOffset,a=Math.abs(o-e);let l=Math.ceil(a/t*s)+.03*s;if(currItem==e&&l<a){o>e+l&&(l=-l);const s=o+window.innerHeight;s+l<t?requestAnimationFrame(()=>{scrollBy(0,l),smoothScroll(e,t)}):t-s<t-e&&scrollBy(0,t-s)}},scrollToTarget=(e,t)=>{currItem=e,smoothScroll(e,t)};let active;const scrollspy=(e,t,s=0,o="navbar__item--active")=>{if(t+innerHeight>=lastBodyHeight)active&&active.classList.remove(o),(active=e[e.length-1][0]).classList.add(o);else if(t>document.querySelector("header").offsetHeight){for(let a of e)if(!a[0].classList.contains(o)&&a[1]<t&&a[2]>t+s){active&&active.classList.remove(o),(active=a[0]).classList.add(o);break}}else active&&active.classList.remove(o)},scrollhide=(e,t,s,o=document.querySelector("nav"),a="navbar--hidden")=>{e!=t&&(s?e>t&&o.classList.remove(a):e<t&&o.classList.add(a))};