const navItems=Array.from(document.querySelectorAll('[href^="#"]'));let scrollEvent,lastBodyHeight,lastScroll;const targets=[];let navY;const mapping=()=>{targets.length=0,navItems.map(e=>{const t=e.getAttribute("href"),s=document.querySelector(t),l=s.offsetTop,o=s.parentElement.offsetTop+s.parentElement.offsetHeight;e.addEventListener("click",e=>{e.preventDefault(),scrollToTarget(l,document.body.offsetHeight)}),targets.push([e,l,o])}),navY=document.querySelector("header").offsetHeight};window.addEventListener("scroll",e=>{scrollEvent=e,scrollspy(targets,e.pageY)});const widthInterval=setInterval(()=>{lastBodyHeight!=document.body.offsetHeight&&(lastBodyHeight=document.body.offsetHeight,mapping());const e=scrollEvent?scrollEvent.pageY:0,t=document.querySelector("nav"),s="links--hidden";if(navY<e){const l=t.classList.contains(s);scrollhide(t,lastScroll,e,s,l),lastScroll=e}else t.classList.contains(s)&&t.classList.remove(s)},500);let currItem;const smoothScroll=(e,t,s=100)=>{const l=scrollEvent?scrollEvent.pageY:0,o=Math.abs(l-e);let c=Math.ceil(o/t*s)+.04*s;if(currItem==e&&c<o){l>e+c&&(c=-c);const s=l+window.innerHeight;s+c<t?requestAnimationFrame(()=>{scrollBy(0,c),smoothScroll(e,t)}):t-s<t-e&&scrollBy(0,t-s)}},scrollToTarget=(e,t)=>{currItem=e,smoothScroll(e,t)};let active;const scrollspy=(e,t)=>{if(t+innerHeight>=lastBodyHeight-10)active&&active.classList.remove("links__item--active"),(active=e[e.length-1][0]).classList.add("links__item--active");else if(t>document.querySelector("header").offsetHeight){for(let s of e)if(!s[0].classList.contains("links__item--active")&&s[1]<t&&s[2]>t){active&&active.classList.remove("links__item--active"),(active=s[0]).classList.add("links__item--active");break}}else active&&active.classList.remove("links__item--active")},scrollhide=(e,t,s,l,o)=>{t!=s&&(o?t>s&&e.classList.remove(l):t<s&&e.classList.add(l))};