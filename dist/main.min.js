const navItems=Array.from(document.querySelectorAll('[href^="#"]'));let scrollEvent,lastBodyHeight;const targets=[],mapping=()=>{targets.length=0,navItems.map(t=>{const e=t.getAttribute("href"),o=document.querySelector(e),s=o.offsetTop,l=o.parentElement.offsetTop+o.parentElement.offsetHeight;t.addEventListener("click",t=>{t.preventDefault(),scrollToTarget(s,document.body.offsetHeight)}),targets.push([t,s,l])}),console.log(targets)},widthInterval=setInterval(()=>{lastBodyHeight!=document.body.offsetHeight&&(console.log("mapping"),lastBodyHeight=document.body.offsetHeight,mapping())},1500);window.addEventListener("scroll",t=>{scrollEvent=t,scrollspy(targets,t.pageY)});let currItem;const smoothScroll=(t,e,o=100)=>{const s=scrollEvent?scrollEvent.pageY:0,l=Math.abs(s-t);let c=Math.ceil(l/e*o)+.04*o;if(currItem==t&&c<l){s>t+c&&(c=-c);const o=s+window.innerHeight;o+c<e?requestAnimationFrame(()=>{scrollBy(0,c),smoothScroll(t,e)}):e-o<e-t&&scrollBy(0,e-o)}},scrollToTarget=(t,e)=>{currItem=t,smoothScroll(t,e)};let active;const scrollspy=(t,e)=>{if(e+innerHeight>=lastBodyHeight-10)active&&active.classList.remove("links__item--active"),(active=t[t.length-1][0]).classList.add("links__item--active");else for(let o of t)if(active!==o[0]&&o[1]<e&&o[2]>e){active&&active.classList.remove("links__item--active"),(active=o[0]).classList.add("links__item--active");break}};